1ï¸âƒ£ App.jsx ì‹¤í–‰
   â””â”€> storeë¥¼ import í•˜ë ¤ê³  í•¨
/**
 * App.jsx
 */
import store from "./store";  // 1. store ì„í¬íŠ¸

function App() {
  return (
    <Provider store={store}>
      <RouterProvider router={userRouter} />
    </Provider>
  );
}
-----------------------------------------------------
2ï¸âƒ£ store.js ë¡œë“œ ì‹œì‘
   â””â”€> "authSliceê°€ í•„ìš”í•´!"
   â””â”€> authSlice.jsë¥¼ import
/**
 * store.js
 */
import authReducer from "./features/user/slices/authSlice";  // 2. authSlice ì„í¬íŠ¸

const store = configureStore({
  reducer: {
    auth: authReducer,
  }
});
-----------------------------------------------------
3ï¸âƒ£ authSlice.js ë¡œë“œ ì‹œì‘
   â””â”€> "apiClientê°€ í•„ìš”í•´!"
   â””â”€> authAPI.jsë¥¼ import
/**
 * authSlice.js
 */
import authAPI from "../api/authAPI";  // 3. authAPI ì„í¬íŠ¸

export const registerUserAction = createAsyncThunk(
  authAPI.register();
);
export const loginUserAction = createAsyncThunk(
  authAPI.login();
);

const initialState = { };

const authSlice = createSlice({
  name: "auth",
  initialState,
  reducers: {
    logout: () => {},
    clearError: () => {},
  },
  extraReducers: (builder) => {
    builder
      .addCase(registerUserAction.pending, () => {})
      .addCase(registerUserAction.fulfiled, () => {})
      .addCase(registerUserAction.rejected, () => {})
      .addCase(loginUserAction.pending, () => {})
      .addCase(loginUserAction.fulfiled, () => {})
      .addCase(loginUserAction.rejected, () => {})
  }
});
-----------------------------------------------------
4ï¸âƒ£ authAPI.js ë¡œë“œ ì‹œì‘
   â””â”€> "axiosConfigê°€ í•„ìš”í•´!"
   â””â”€> axiosConfig.jsë¥¼ import ì‹œë„
/**
 * autAPI.js
 */
import apiClient from "../../../shared/api/axiosConfig";  // 4. axiosConfig ì„í¬íŠ¸

const BASE_URL = "/api/auth";

const authAPI = {
  register: (userData) => {
    return apiClient.post(`${BASE_URL}/register`, userData);
  },
  login: (credentials) => {
    return apiClient.post(`${BASE_URL}/login`, credentials);
  },
  logout: () => {
    return apiClient.post(`${BASE_URL}/logout`);
  }
}
-----------------------------------------------------
5ï¸âƒ£ axiosConfig.js ë¡œë“œ ì‹œì‘
   â””â”€> "storeê°€ í•„ìš”í•´!"
   â””â”€> store.jsë¥¼ import ì‹œë„ â† ë¬¸ì œ!
/**
 * axiosConfig.js
 */
import { logout } from "../../features/user/slices/authSlice";
import store from "../../store";  // 5. store ì„í¬íŠ¸ (ë¬¸ì œ ë°œìƒ)

apiClient.interceptors.response.use(
  (response) => {
    return response;
  },
  (error) => {
    if (error.response?.status === 401) {
      store.dispatch(logout());
    }
    return Promise.reject(error);
  }
)

âŒ ì—ëŸ¬ ë°œìƒ!
   store.jsëŠ” ì•„ì§ ë¡œë“œ ì¤‘ì¸ë°
   ë‹¤ì‹œ store.jsë¥¼ ë¶ˆëŸ¬ì˜¤ë ¤ê³  í•¨
   â†’ "Cannot access 'store' before initialization"

 ----------------------------------------------
 
 ğŸ‘Œ í•´ê²°
   ë§ˆì§€ë§‰ì— ì—´ë¦¬ëŠ” axiosConfig.js íŒŒì¼ ìˆ˜ì •.
   App.jsxë¡œë¶€í„° storeë¥¼ ë°›ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½.

1ï¸âƒ£ axiosConfig.js
/**
 * axiosConfig.js
 */ 
import { logout } from "../../features/user/slices/authSlice";   // ì‚­ì œ (ë™ì  importë¡œ ë³€ê²½)
import store from "../../store";                                 // ì‚­ì œ (setStoreë¡œ ë°›ì•„ì˜´)

// setStore() - App.jsxì—ì„œ í˜¸ì¶œí•˜ì—¬ storeë¥¼ ì „ë‹¬í•´ ì¤Œ
let store;
export const setStore = (storeInstance) => {
  store = storeInstance;
}

apiClient.interceptors.response.use(
  (response) => {
    return response;
  },
  (error) => {
    if (error.response?.status === 401) {
      if (store) {
        import("../../features/user/slices/authSlice")  // storeë¥¼ ë°›ì•„ì˜¤ë©´ import ì§„í–‰
          .then(({ logout }) => {
            store.dispatch(logout());
          })
      }
    }
    return Promise.reject(error);
  }
)

----------------------------------------------

2ï¸âƒ£ App.jsx
/**
 * App.jsx
 */
import store from "./store";

// ìˆœí™˜ ì°¸ì¡° ë°©ì§€ë¥¼ ìœ„í•´ axiosConfig.js íŒŒì¼ì— store ì „ë‹¬
import { setStore } from "./shared/api/axiosConfig";
setStore(store);

function App() {
  return (
    <Provider store={store}>
      <RouterProvider router={userRouter} />
    </Provider>
  );
}